<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.2"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="[Digging] 어쩌다보니 Node debugging 환경 세팅" /><meta name="author" content="Raccoon" /><meta property="og:locale" content="en_US" /><meta name="description" content="삼천포로 빠진 Node debugging 환경세팅" /><meta property="og:description" content="삼천포로 빠진 Node debugging 환경세팅" /><link rel="canonical" href="https://juddroid.github.io/posts/front03-day5/" /><meta property="og:url" content="https://juddroid.github.io/posts/front03-day5/" /><meta property="og:site_name" content="Raccoon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-02-26T21:24:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Digging] 어쩌다보니 Node debugging 환경 세팅" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"삼천포로 빠진 Node debugging 환경세팅","url":"https://juddroid.github.io/posts/front03-day5/","@type":"BlogPosting","headline":"[Digging] 어쩌다보니 Node debugging 환경 세팅","dateModified":"2021-02-26T21:31:11+09:00","datePublished":"2021-02-26T21:24:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://juddroid.github.io/posts/front03-day5/"},"author":{"@type":"Person","name":"Raccoon"},"@context":"https://schema.org"}</script><title>[Digging] 어쩌다보니 Node debugging 환경 세팅 | Raccoon</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-35DGNMXRP7"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-35DGNMXRP7'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/favicons/ms-icon-310x310.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Raccoon</a></div><div class="site-subtitle font-italic">Digging to the end of the Earth</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/juddroid" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://instagram.com/juddroid_raccoon" aria-label="instagram" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['nobllizdc','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>[Digging] 어쩌다보니 Node debugging 환경 세팅</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Digging] 어쩌다보니 Node debugging 환경 세팅</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Feb 26, 2021, 9:24 PM +0900" > Feb 26 <i class="unloaded">2021-02-26T21:24:00+09:00</i> </span> by <span class="author"> Raccoon </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Fri, Feb 26, 2021, 9:31 PM +0900" > Feb 26 <i class="unloaded">2021-02-26T21:31:11+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1682 words">9 min</span></div></div><div class="post-content"><h1 id="삼천포로-빠진-node-debugging-환경세팅">삼천포로 빠진 Node debugging 환경세팅</h1><p>node express 서버로 HTTP 통신을 해서 데이터를 받아와 js로 기능 구현을 하는 연습중이다.</p><p>일단 앞선 문장의 표현이 정확한 표현인지도 잘 모르겠을만큼 서버와 클라이언트의 통신 방법과 환경 구성에 대한 이해가 너무나 부족한 상황인 것 같은데, 한꺼번에 여러가지를 하려니 내가 뭘 모르는지도 모르겠는 상황에 이르렀다.</p><p>그러던 중 얼마전부터 새삼 중요성을 깨닫고 있는 것이 바로 <strong>디버깅</strong>이다.</p><p>디버깅 방법이야 여러가지가 있겠지만 최근 크롬 브라우저로 뷰를 보면서 작업할 때, 디버깅에 얼마나 익숙하냐의 차이는 기능 구현뿐만 아니라 코딩시간이나 습관에도 영향을 크게 미칠 것만 같은 너낌적인 너낌. 사실 크롬 개발자 도구를 이용한 디버깅에 익숙해지기 시작하면서 작업 자체의 만족도와 흥미가 상당히 올라갔다고 해도 과언이 아니다.</p><p>node 환경에서도 평상시엔 vsc에서 <code class="language-plaintext highlighter-rouge">F9</code> 혹은 <code class="language-plaintext highlighter-rouge">break point</code>를 걸고 <code class="language-plaintext highlighter-rouge">F5</code>를 누르면 디버깅 콘솔이 나타나곤 했는데, <code class="language-plaintext highlighter-rouge">readline</code> 모듈을 사용할 때는 이게 정상적으로 작동하지를 않았다. 작동하지 않았다기보다는 몰라서 사용을 못한거겠지만…</p><p>그 때, 어떤 동료가 분명 <code class="language-plaintext highlighter-rouge">nodemon --inspect</code> 라는 걸 알려줘서 어떻게 어떻게 당시 상황만 마무리하고 넘어갔던 기억이 있는데, 역시나 제대로 사용할 줄을 모르니 다시 돌아오게 된다. 조금 억울한 부분이 있다면 과정 시작전 pre-school에서 첫번째로 만난 녀석이 <a href="https://code.visualstudio.com/docs/editor/debugging">vs-code의 <code class="language-plaintext highlighter-rouge">debugging</code> 시스템이 얼마나 훌륭한가</a>에 대한 자랑을 ‘해석’하는 일이었는데 결국 정복하지 못했다. 지금보다도 더 사전 지식이 없었으니 당연한 결과였던 것 같기도 하고…</p><h2 id="node-express-통신-환경에서-디버깅을-어떻게-하냐고">Node express 통신 환경에서 디버깅을 어떻게 하냐고…</h2><h3 id="consolelog-를-사용하면-된다"><code class="language-plaintext highlighter-rouge">console.log</code> 를 사용하면 된다.</h3><ul><li>여기저기 필요하다고 생각하는 곳마다 열심히 <code class="language-plaintext highlighter-rouge">console.log</code> 를 찍어 놓으면 거기로 데이터가 들어오고 있는지 어떻게 들어오고 있는지 확인할 수가 있다.<li>눈으로 확인을 해야 이해가 더 잘가는 나에게는 아주 유용하고, 유일한 방법인데, 여간 귀찮기도 하고, 시간도 많이 걸린다.<li>아주 효율적이지도 않고, 좋은 습관도 아닌 것 같으니 새로운(?)… 조금 더 정상적인 방법을 찾아내야 했다.</ul><h2 id="node-환경에서-debugging을-할-수-있도록-세팅을-해보자">Node 환경에서 debugging을 할 수 있도록 세팅을 해보자!</h2><h3 id="1-packagejson-세팅">1. package.json 세팅</h3><div class="language-json highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nl">"debug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nodemon --inspect ./bin/www"</span><span class="w">
</span></pre></table></code></div></div><ul><li>최근에 친하게 지내게 된 녀석인데 <code class="language-plaintext highlighter-rouge">npm init</code> 으로 만들어 낼 수 있고, npm 프로젝트 내용과 <code class="language-plaintext highlighter-rouge">dependency</code>가 기록되어 있다.<li><code class="language-plaintext highlighter-rouge">name</code>: 프로젝트 제목(폴더 이름)<li><code class="language-plaintext highlighter-rouge">start</code>: <code class="language-plaintext highlighter-rouge">nodemon</code> 으로 <code class="language-plaintext highlighter-rouge">./bin/www</code> 를 실행<li><code class="language-plaintext highlighter-rouge">debug</code>: 디버깅은 <code class="language-plaintext highlighter-rouge">nodemon --inspect</code> 를 사용할거임<li><code class="language-plaintext highlighter-rouge">dependencies</code> 에 있는 내용은 <code class="language-plaintext highlighter-rouge">express</code> 관련 의존 모듈들이다. 이제보니 <code class="language-plaintext highlighter-rouge">debug</code>가 있는데 저건 또 어떤건지 알아봐야 될듯하다.</ul><div class="language-json highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raccoon-shopping-express"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nodemon ./bin/www"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"debug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nodemon --inspect ./bin/www"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"cookie-parser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"~1.4.4"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^2.8.5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"debug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"~2.6.9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"express"</span><span class="p">:</span><span class="w"> </span><span class="s2">"~4.16.1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"http-errors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"~1.6.3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"morgan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"~1.9.1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0.0-beta11"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"parcel-bundler"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^1.12.4"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sass"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^1.32.8"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></pre></table></code></div></div><h3 id="2-launchjson-세팅">2. launch.json 세팅</h3><div class="language-json highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"configurations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"node"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="s2">"attach"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Node: Nodemon"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"processId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${command:PickProcess}"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"restart"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inspector"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"program"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${workspaceFolder}/raccoon-shopping-express/app.js"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">F5</code>나 <code class="language-plaintext highlighter-rouge">Ctrl + Shift + D</code> 를 눌러서 디버깅 탭에 가면 <code class="language-plaintext highlighter-rouge">create configuration</code> 을 해야한다고 나오는데, 나는 사실 이게 뭔지도 모르겠고, 겁나서 별로 보고 싶지가 않았다.<li>대충 관련된 메뉴가 있어서 누르면 자동으로 <code class="language-plaintext highlighter-rouge">launch.json</code> 이 생성되고, 아니면 그냥 직접 생성해서 세팅을 해도 상관이 없다.<li><code class="language-plaintext highlighter-rouge">nodemon, inspector, path</code> 까지 설정<li>설정은 <a href="https://github.com/microsoft/vscode-recipes/tree/master/nodemon">요기</a>를 참고했다.</ul><h3 id="3-debugger-or-break-on">3. debugger (or break on)</h3><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">JSON_DATA</span><span class="p">.</span><span class="nx">hotDealList</span><span class="p">.</span><span class="nx">path</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">resFile</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">../serverData/hotDealList.json</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">resFile</span><span class="p">);</span>
  <span class="k">debugger</span><span class="p">;</span>
<span class="p">});</span>
</pre></table></code></div></div><ul><li>이제 코드에서 확인하고 싶은 곳에 <code class="language-plaintext highlighter-rouge">debugger</code> 를 걸거나, <code class="language-plaintext highlighter-rouge">break on</code> (<code class="language-plaintext highlighter-rouge">F9</code>) 하고,<ul><li>나는 서버쪽에서 <code class="language-plaintext highlighter-rouge">res.json()</code> 혹은 <code class="language-plaintext highlighter-rouge">res.send()</code> 등 파일들이 어떻게 들어오는지 확인하고 싶어서 이렇게 해봤다.</ul><li><code class="language-plaintext highlighter-rouge">package.json</code> 이 있는 곳에서,<li><code class="language-plaintext highlighter-rouge">nodemon --inspect ./bin/www</code> 해도 되고, 이미 <code class="language-plaintext highlighter-rouge">package.json</code> 에 등록했으니<li><code class="language-plaintext highlighter-rouge">npm run debug</code> 하면</ul><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="o">&gt;</span> raccoon-shopping-express@0.0.0 debug /mnt/c/Users/Raccoon/Desktop/squad_front/03-shopping/fe-w3-shopping/raccoon-shopping-express
<span class="o">&gt;</span> nodemon <span class="nt">--inspect</span> ./bin/www

<span class="o">[</span>nodemon] 2.0.7
<span class="o">[</span>nodemon] to restart at any <span class="nb">time</span>, enter <span class="sb">`</span>rs<span class="sb">`</span>
<span class="o">[</span>nodemon] watching path<span class="o">(</span>s<span class="o">)</span>: <span class="k">*</span>.<span class="k">*</span>
<span class="o">[</span>nodemon] watching extensions: js,mjs,json
<span class="o">[</span>nodemon] starting <span class="sb">`</span>node <span class="nt">--inspect</span> ./bin/www<span class="sb">`</span>
Debugger listening on ws://127.0.0.1:9229/de7f45ae-2d40-4e3e-9272-6e4fc035030b
For <span class="nb">help</span>, see: https://nodejs.org/en/docs/inspector
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">Debugger listening</code> 이라는 메세지가 나온다.</ul><h3 id="4-debugger-실행">4. Debugger 실행</h3><ul><li><code class="language-plaintext highlighter-rouge">F5</code> 혹은 디버거 탭에서 <code class="language-plaintext highlighter-rouge">Node:Nodemon</code>으로 <code class="language-plaintext highlighter-rouge">RUN</code></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/70361152/109273166-2e57ee80-7855-11eb-9b4c-f6735bc54cfb.png" alt="screenshot157" /></p><ul><li><code class="language-plaintext highlighter-rouge">port: 9229</code> 로 <code class="language-plaintext highlighter-rouge">node --inspect</code> 실행을 하면</ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/70361152/109273168-2ef08500-7855-11eb-9ab7-84b5e72b91b5.png" alt="screenshot158" /></p><ul><li>아래처럼 <code class="language-plaintext highlighter-rouge">Debugger attached</code> 되면서 <code class="language-plaintext highlighter-rouge">debug console</code> 색깔이 예쁘게 바뀐다.<li>여기까지 오면 성공인 것 같다. 이제 이 환경에서 잘 확인만 하면되는데,<li><code class="language-plaintext highlighter-rouge">express</code> 나 서버통신 환경에 대한 이해가 부족해서 조금 더 헤맸다.</ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/70361152/109296953-894d0e00-7874-11eb-9a66-6a031ef7c7a3.png" alt="screenshot166" /></p><h3 id="5-이것저것-확인해보기">5. 이것저것 확인해보기</h3><ul><li>이제서야 내가 확인하고 싶었던걸 확인할 수 있다.<li><code class="language-plaintext highlighter-rouge">debug console</code>에서 <code class="language-plaintext highlighter-rouge">resFile</code>확인</ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/70361152/109273556-b3db9e80-7855-11eb-84d6-4bc79b122c54.png" alt="screenshot159" /></p><ul><li><p>잘 들어오고 있다.</p><li>브라우져에서 <code class="language-plaintext highlighter-rouge">response</code>가 있는지 확인(브라우저 <code class="language-plaintext highlighter-rouge">F5</code>)<li><code class="language-plaintext highlighter-rouge">Network</code> 탭도 확인</ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/70361152/109273832-0fa62780-7856-11eb-978b-8660b1be83a8.png" alt="screenshot160" /></p><ul><li><p>잘 들어오고 있다.</p><li><p><code class="language-plaintext highlighter-rouge">res.json(resFile)</code></p></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/70361152/109274660-1bdeb480-7857-11eb-879d-432b35bd6351.png" alt="screenshot162" /></p><ul><li><code class="language-plaintext highlighter-rouge">res.json(resFile.hotDealList)</code></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/70361152/109274659-1aad8780-7857-11eb-9d49-f0d9c3a2d309.png" alt="screenshot161" /></p><ul><li>Response Header 구경</ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/70361152/109274663-1bdeb480-7857-11eb-8f39-e2a52845a526.png" alt="screenshot163" /></p><ul><li>이제보니 어제 그렇게 고생시켰던 cross-orgin 내용도 있고, 여기에 정보들이 다 있었다.<li>이제 이런식으로 node에서 디버깅 할 수 있게 됐다. 기능구현하러 가야지…</ul><h2 id="알게-된것">알게 된것</h2><ul><li>평상시에 연습용으로 간단히 확인할 때, 콘솔창 따로 떼서 옆에 두고 쓰고 싶다는 생각을 자주 했었는데<li><code class="language-plaintext highlighter-rouge">chrome://inspect</code> 를 크롬 주소창에 입력해도 되고, 요기 녹색 <code class="language-plaintext highlighter-rouge">NodeJS</code> 버튼을 눌러도 <code class="language-plaintext highlighter-rouge">DevTools</code> 창이 뜬다.<li>자주 사용할 것 같기도 하고…</ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/70361152/109275098-a0313780-7857-11eb-8795-03319cf5ca79.png" alt="screenshot164" /></p><ul><li>디버깅 중이라면 디버그 콘솔로도 사용이 가능한 것 같다.</ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/70361152/109275563-42511f80-7858-11eb-8fd4-e39cfc706adb.gif" alt="devTools" /></p><h4 id="참조">참조</h4><ul><li><a href="https://github.com/microsoft/vscode-recipes/tree/master/nodemon">Node.js debugging in VS Code with Nodemon</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/digging/'>Digging</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/node/" class="post-tag no-text-decoration" >node</a> <a href="/tags/express/" class="post-tag no-text-decoration" >express</a> <a href="/tags/package-json/" class="post-tag no-text-decoration" >package.json</a> <a href="/tags/launch-json/" class="post-tag no-text-decoration" >launch.json</a> <a href="/tags/debug/" class="post-tag no-text-decoration" >debug</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="" data-toggle="tooltip" data-placement="top" title="" target="_blank" rel="noopener" aria-label=""> <i class="fa-fw "></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/silent-night/">[thinkAbout] 새벽감성으로 생각정리하기</a><li><a href="/posts/front03-day5/">[Digging] 어쩌다보니 Node debugging 환경 세팅</a><li><a href="/posts/git/">[HTML/CSS] Git 기본기 연습</a><li><a href="/posts/http/">[CS] Text Browser를 만들어보자</a><li><a href="/posts/bulk-insert/">[Digging] Data 백만개 어떻게 처리하지..(feat. bulk insert)</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/database/">database</a> <a class="post-tag" href="/tags/dns/">dns</a> <a class="post-tag" href="/tags/domain/">domain</a> <a class="post-tag" href="/tags/http/">http</a> <a class="post-tag" href="/tags/mysql/">mysql</a> <a class="post-tag" href="/tags/register/">register</a> <a class="post-tag" href="/tags/socket/">socket</a> <a class="post-tag" href="/tags/tcp/">tcp</a> <a class="post-tag" href="/tags/udp/">udp</a> <a class="post-tag" href="/tags/wire-shark/">wire shark</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/algorithm-hacker-rank/"><div class="card-body"> <span class="timeago small" > Jan 28 <i class="unloaded">2021-01-28T03:15:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Algorithm] Hacker Rank 와의 첫만남, 그리고...(feat.CodeForce)</h3><div class="text-muted small"><p> 하루하루가 멘붕의 연속이다. 오늘은 Hacker Rank 라는 사이트를 처음 만나서 4문제를 풀고, Code Force 라는 곳에서 가상대회에 출전을 해본다. 어제 차마 마져 구현하지 못한 ‘카페 이벤트’ 때문에 오후 4시까지 해커랭크 문제를 다 푼다. 곧바로 가상대회(2시간)에 참가해서 6시 30전후로 마친다. 카페 이벤트 코드를 점검...</p></div></div></a></div><div class="card"> <a href="/posts/bulk-insert/"><div class="card-body"> <span class="timeago small" > Feb 1 <i class="unloaded">2021-02-01T05:06:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Digging] Data 백만개 어떻게 처리하지..(feat. bulk insert)</h3><div class="text-muted small"><p> Data 백만개 어떻게 처리하지..(feat. bulk insert) 며칠전 이런 어줍잖은 progress bar 를 만들고, 기괴한 코드를 짜놓고, 그래도 백만개의 데이터가 db 에 들어간다고 좋아했었다. 하지만 db 의 세상에서 data 백만개는 일도 아니라는데, 저 굼벵이를 10여분간 흐뭇하게 바라보고 있어야 한다는게 영 찝찝...</p></div></div></a></div><div class="card"> <a href="/posts/docker/"><div class="card-body"> <span class="timeago small" > Feb 1 <i class="unloaded">2021-02-01T05:10:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[CS] 도커(Docker)와의 조우, 그리고 mySQL</h3><div class="text-muted small"><p> 도커(Docker)와의 조우, 그리고 mySQL VS Code 익스텐션으로 처음만난 친구다. 이름도 외모도 귀엽게 생겨서 설치는 했는데 어떻게 쓰는줄을 몰라서 무용지물이었다. 초보를 위한 도커 안내서 - 도커란 무엇인가? 가장 쉽게 배우는 도커 위에 글은 링크에 링크가 있고, 아래 유튭 영상이 개념상 이해할만 했다. 그러니까 이해한대로 요약해...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/git/" class="btn btn-outline-primary"><p>[HTML/CSS] Git 기본기 연습</p></a> <a href="/posts/parcel/" class="btn btn-outline-primary"><p>[Digging] Parcel, 진짜 나한테 왜 이럼?</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//digging-raccoon.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://juddroid.github.io/posts/front03-day5/'; this.page.identifier = '/posts/front03-day5/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/juddroid">Raccoon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/database/">database</a> <a class="post-tag" href="/tags/dns/">dns</a> <a class="post-tag" href="/tags/domain/">domain</a> <a class="post-tag" href="/tags/http/">http</a> <a class="post-tag" href="/tags/mysql/">mysql</a> <a class="post-tag" href="/tags/register/">register</a> <a class="post-tag" href="/tags/socket/">socket</a> <a class="post-tag" href="/tags/tcp/">tcp</a> <a class="post-tag" href="/tags/udp/">udp</a> <a class="post-tag" href="/tags/wire-shark/">wire shark</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://juddroid.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-35DGNMXRP7"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-35DGNMXRP7'); }); </script>
